!function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=3)}([function(e,n,t){var i=t(6),r=t(7),o=t(8);e.exports=function(e,n){return i(e)||r(e,n)||o()}},function(e,n){e.exports=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}},function(e,n){function t(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}},function(e,n,t){t(4),e.exports=t(5)},function(e,n){[Element.prototype,CharacterData.prototype,DocumentType.prototype].filter(Boolean).forEach((function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})}))},function(e,n,t){"use strict";t.r(n);var i=t(0),r=t.n(i),o=t(1),a=t.n(o),s=t(2),l=t.n(s),h=null,c=0,u=[],d=[],f={hours:12,minutes:"00",seconds:"00"},p=0,b=!1,y=!1,g=function(){function e(n,t,i,r,o,s,l,h,c,u,d,f,p,b,y,g,v,m,x,w){a()(this,e),this.size=n,this.speed=t,this.color=i,this.x=r,this.y=o,this.resistance=s,this.dots=h,this.howManyDots=l,this.parents=c,this.bornDelay=u,this.hunger=d,this.death=f,this.children=p,this.partner=b,this.needLove=y,this.hungerBar=g,this.sexDelay=v,this.dominant=m,this.generation=x,this.initialValues=w}return l()(e,[{key:"giveBlobID",value:function(){this.id=c,c++}},{key:"declareBlobHungerBar",value:function(){this.initialValues.hunger=this.hunger,this.hungerBar.width=this.initialValues.hunger/16}},{key:"blobAI",value:function(){this.pickPoint()}},{key:"pickPoint",value:function(){void 0===this.pointPicked?(this.pointPicked=I(),this.startMoving()):"rest"===this.pointPicked?this.rest():this.startMoving()}},{key:"rest",value:function(){this.resistance--,this.hunger-=S(this.initialValues.hunger,.1),this.hungerBar.width>0&&(this.hungerBar.width-=S(this.initialValues.hunger/16,.1)),this.needLove&&this.bornDelay--,this.resistance<=0&&(this.needLove&&500===this.death&&500===this.partner.death&&(this.getBorn(this.partner),this.bornDelay=700,this.partner.bornDelay=700,this.needLove=!1,this.partner.needLove=!1,this.partner.partner=null,this.partner=null),this.sexDelay--,this.resistance=350,null!==this.partner&&(this.partner.resistance=350),this.pointPicked=void 0,this.pickPoint())}},{key:"checkHunger",value:function(){if(this.hunger<=0)return!0}},{key:"blobDeath",value:function(){500===this.death&&this.rest(),this.death<500&&(this.dots.forEach((function(e){e.size>.1&&(e.size-=.1)})),this.size>.1?this.size-=.1:(this.death=0,delete u[this.id]))}},{key:"startMoving",value:function(){var e=this;this.checkHunger()?(this.death--,this.blobDeath()):(this.checkForCollision(),this.hunger-=S(this.initialValues.hunger,.2),this.sexDelay<=0&&(this.sexDelay=500),500!==this.sexDelay&&this.sexDelay--,this.hungerBar.width>0&&(this.hungerBar.width-=S(this.initialValues.hunger/16,.2)),this.x<this.pointPicked.x?(this.x+=this.speed,this.dots.forEach((function(n){return n.x+=e.speed}))):this.x>this.pointPicked.x&&(this.x-=this.speed,this.dots.forEach((function(n){return n.x-=e.speed}))),this.y<this.pointPicked.y?(this.y+=this.speed,this.dots.forEach((function(n){return n.y+=e.speed}))):this.y>this.pointPicked.y&&(this.y-=this.speed,this.dots.forEach((function(n){return n.y-=e.speed}))),this.x===this.pointPicked.x&&this.y===this.pointPicked.y&&(this.pointPicked="rest",this.rest()),this.checkForFood())}},{key:"checkForFood",value:function(){var e=this;d.forEach((function(n){var t=e.x,i=n.x,r=e.y,o=n.y;if(Math.sqrt((i-t)*(i-t)+(o-r)*(o-r))<e.size){e.size<30?e.hunger+=S(e.initialValues.hunger,7):e.hunger+=S(e.initialValues.hunger,15),e.size<30?e.hungerBar.width+=S(e.initialValues.hunger/16,7):e.hungerBar.width+=S(e.initialValues.hunger/16,15),n.eaten=!0;for(var a=d.filter((function(e){return!0!==e.eaten}));d.length>0;)d.pop();a.forEach((function(e){return d.push(e)})),e.size++,e.dots.forEach((function(e){e.randX.plusOrMinus%2==0?e.x+=.1:e.x-=.1,e.randY.plusOrMinus%2==0?e.y+=.1:e.y-=.1,e.size+=e.size/48}))}}))}},{key:"checkForCollision",value:function(){var e=this;u.forEach((function(n){if(n.id!==e.id){var t=e.x,i=n.x,r=e.y,o=n.y;Math.sqrt((i-t)*(i-t)+(o-r)*(o-r))<e.size&&n.size>=20&&700===e.bornDelay&&700===n.bornDelay&&500===e.sexDelay&&e.size>20&&n.size>20&&e.startCloseUp(n)}}))}},{key:"startCloseUp",value:function(e){null===this.partner&&(this.partner=e,this.partner.partner=this,this.needLove=!0,this.partner.needLove=!0,this.pointPicked="rest",this.partner.pointPicked="rest",this.partner.rest(),this.rest())}},{key:"getBorn",value:function(n){var t=[{color:this.color,dots:this.dots},{color:n.color,dots:n.dots}],i=Math.floor(2*Math.random()),r=new e(20,1,t[i].color,this.x,this.y,350,20,[],[this,n],750,1500,500,[],null,!1,{width:100,height:10},500,{},this.generation+n.generation/2+1,{hunger:null});this.declareBabyBlobDominantFeature(r,n,n.partner),r.giveBlobID(),r.declareBlobHungerBar();for(var o=0;o<=r.howManyDots;o++)z(r,o,0===i?t[1].color:t[0].color);this.children.push(r),n.children.push(r),u.push(r)}},{key:"declareBabyBlobDominantFeature",value:function(e,n,t){var i,r=Math.floor(Math.random()*(10*e.generation))+1;for(var o in i=n.dominant.value>t.dominant.value?n.dominant.feature:t.dominant.feature,e.dominant.feature=i,e.dominant.value=r,e)o===i&&(e[i]+=S(e[i],r))}}]),e}();function v(){document.querySelector("#timer").textContent="".concat(f.hours,":").concat(f.minutes,":").concat(f.seconds)}function m(e){u.forEach((function(n){var t=e.clientX,i=n.x,r=e.clientY,o=n.y;Math.sqrt((i-t)*(i-t)+(o-r)*(o-r))<n.size&&function(e){var n;(n=null!==document.querySelector("#blobInfoBox")?document.querySelector("#blobInfoBox"):document.createElement("div")).id="blobInfoBox",e.hunger>=0&&null!==e.partner?n.innerHTML='<span id="close">\n            <img src=\'../img/close.png\' />\n         </span>\n         <canvas width="150px" height="150px" id="miniature"></canvas>\n         <div>Blob id: <span>'.concat(e.id,'</span></div>\n         <div id="blobSize">Blob size: <span>').concat(e.size,'</span></div>\n         <div id="blobHunger">Blob hunger: <span>').concat(e.hunger,'</span></div>\n         <div id="blobResist">Blob resistance: <span>').concat(e.resistance,'</span></div>\n         <div id="blobBornDelay">Blob born delay: <span>').concat(e.bornDelay,'</span></div>\n         <div id="blobPartner">Blob partner:</div>\n         <div id="blobDominantFeature">Blob dominant feature: <span>').concat(e.dominant.feature[0].toUpperCase()).concat(e.dominant.feature.slice(1),'</span></div>\n         <canvas width="150px" height="150px" id="partner"></canvas>'):e.hunger>=0&&null===e.partner?n.innerHTML='<span id="close">\n            <img src=\'../img/close.png\' />\n        </span>\n        <canvas width="150px" height="150px" id="miniature"></canvas>\n        <div>Blob id: <span>'.concat(e.id,'</span></div>\n        <div id="blobSize">Blob size: <span>').concat(e.size,'</span></div>\n        <div id="blobHunger">Blob hunger: <span>').concat(e.hunger,'</span></div>\n        <div id="blobResist">Blob resistance: <span>').concat(e.resistance,'</span></div>\n        <div id="blobBornDelay">Blob born delay: <span>').concat(e.bornDelay,'</span></div>\n        <div id="blobDominantFeature">Blob dominant feature: <span>').concat(e.dominant.feature[0].toUpperCase()).concat(e.dominant.feature.slice(1),"</span></div>"):n.innerHTML="<span id=\"close\">\n            <img src='../img/close.png' />\n         </span>\n         <div id=\"deadBlobImgBox\">\n            <img src='../img/skull.png'>\n         </div>\n         <div>This blob is <span>dead!</span></div>";null===document.querySelector("#blobInfoBox")&&document.body.appendChild(n),document.querySelector("#close").addEventListener("click",(function(){return document.querySelector("#blobInfoBox").remove()})),function(e){var n,t=document.querySelector("#miniature");null!==t&&((n=t.getContext("2d")).beginPath(),n.fillStyle="rgba(0, 0, 0, 0.3)",n.arc(t.width/2-1.5,t.height/2-1.5,e.size+1,0,2*Math.PI),n.fill(),n.closePath(),n.beginPath(),n.fillStyle=e.color,n.arc(t.width/2,t.height/2,e.size,0,2*Math.PI),n.fill(),n.closePath(),e.dots.forEach((function(e){n.beginPath(),n.fillStyle=e.color,n.arc(e.randX.plusOrMinus%2==0?t.width/2+e.randX.x:t.width/2-e.randX.x,e.randY.plusOrMinus%2==0?t.height/2+e.randY.y:t.height/2-e.randY.y,e.size,0,2*Math.PI),n.fill(),n.closePath()})))}(e),null!==e.partner&&function(e){var n=document.querySelector("#partner"),t=n.getContext("2d");(function(e,n){n.beginPath(),n.fillStyle="#0d0d0d",n.fillRect(0,0,e.width,e.height),n.fill(),n.closePath()})(n,t),x(t,"rgba(0, 0, 0, 0.3)",n.width/2-1.5,n.height/2-1.5,e.partner.size/1.3),x(t,e.partner.color,n.width/2,n.height/2,e.partner.size/1.3),e.partner.dots.forEach((function(e){t.beginPath(),t.fillStyle=e.color,t.arc(e.randX.plusOrMinus%2==0?n.width/2+e.randX.x:n.width/2-e.randX.x,e.randY.plusOrMinus%2==0?n.height/2+e.randY.y:n.height/2-e.randY.y,e.size/1.3,0,2*Math.PI),t.fill(),t.closePath()}))}(e)}(n)}))}function x(e,n,t,i,r){e.beginPath(),e.fillStyle=n,e.arc(t,i,r,0,2*Math.PI),e.fill(),e.closePath()}function w(e){var n=u.some((function(n){var t=e.clientX,i=n.x,r=e.clientY,o=n.y;if(Math.sqrt((i-t)*(i-t)+(o-r)*(o-r))<n.size)return!0}));document.body.style.cursor=n?"pointer":"default"}function M(){if(y)return cancelAnimationFrame(h);var e,n,t;!function(){var e=parseInt(f.seconds),n=parseInt(f.minutes),t=parseInt(f.hours);(e+=30)<10&&(e="0"+e);e>=59&&(n++,e="00");n<10&&(n="0"+n);59===n&&(n="00",t++);t<10&&(t="0"+t);24===t&&(t="00");f.seconds=e,f.minutes=n,f.hours=t,v(),b&&f.hours>=3&&(p-=.001,document.querySelector("#dayBox").style.opacity="".concat(p)),p<=0&&(p=0,b=!1),p>=.7&&(b=!0),f.hours>=18&&!b&&(p+=.001,document.querySelector("#dayBox").style.opacity="".concat(p))}(),e=document.querySelector("#characters"),n=e.getContext("2d"),(t=new Image).src="../img/bg.jpg",e.width=window.innerWidth,e.height=window.innerHeight,n.drawImage(t,0,0,window.innerWidth,window.innerHeight),(12===f.hours&&"00"===f.minutes||"00"===f.hours&&"00"===f.minutes)&&D(100),u.forEach((function(e){void 0!==e&&(e.size>=100&&(B("won",e),y=!0),function(e){var n=document.querySelector("#characters").getContext("2d");x(n,"rgba(0, 0, 0, 0.3)",e.x-1.5,e.y-1.5,e.size+1),x(n,e.needLove?"#ff3399":e.color,e.x,e.y,e.size),e.dots.forEach((function(t){x(n,e.needLove?"#b30059":t.color,t.x,t.y,t.size)})),e.hunger>0&&(n.beginPath(),n.fillStyle="#ff4d4d",n.fillRect(e.x-e.hungerBar.width/2,e.y-(e.size+15),e.hungerBar.width,e.hungerBar.height),n.fill(),n.closePath())}(e),e.blobAI())})),u.every((function(e){return void 0===e}))&&(B("lose",null),y=!0),d.forEach((function(e){return function(e){e.size<5&&(e.size+=.5);q("saddlebrown",e.x+2,e.y-2,e.size+e.size/2),q("yellow",e.x,e.y,e.size),q("wheat",e.x-1,e.y+2,e.size-e.size/2)}(e)})),h=requestAnimationFrame(M),function(){if(null===document.querySelector("#blobInfoBox"))return;var e=null;u.forEach((function(n){n.id===parseInt(document.querySelector("#blobInfoBox div span").textContent)&&(e=n)})),null!==e&&e.hunger<=0&&(document.querySelector("#blobInfoBox").innerHTML="<span id=\"close\">\n                <img src='../img/close.png' />\n             </span>\n             <div id=\"deadBlobImgBox\">\n                <img src='../img/skull.png'>\n             </div>\n             <div>This blob is <span>dead!</span></div>",document.querySelector("#close").addEventListener("click",(function(){return document.querySelector("#blobInfoBox").remove()})));null!==document.querySelector("#blobSize")&&(document.querySelector("#blobSize").innerHTML="Blob size: <span>".concat(e.size.toFixed(2),"</span>")),null!==document.querySelector("#blobHunger")&&(document.querySelector("#blobHunger").innerHTML="Blob hunger: <span>".concat(e.hunger.toFixed(2),"</span>")),null!==document.querySelector("#blobResist")&&(document.querySelector("#blobResist").innerHTML="Blob resistance: <span>".concat(e.resistance.toFixed(2),"</span>")),null!==document.querySelector("#blobBornDelay")&&(document.querySelector("#blobBornDelay").innerHTML="Blob born delay: <span>".concat(e.bornDelay.toFixed(2),"</span>"))}()}function B(e,n){var t=document.createElement("div");t.id="finalBox","won"===e?(t.innerHTML="<h1>Simulation is over</h1>\n             <h2>Blob with id <span>".concat(n.id,'</span> was the strongest unit</h2>\n             <canvas id="winner"></canvas>'),document.body.appendChild(t),function(e){var n=document.querySelector("#winner"),t=n.getContext("2d");n.width=window.innerWidth/3,n.height=window.innerHeight/3,t.beginPath(),t.fillStyle="rgba(0, 0, 0, 0.3)",t.arc(n.width/2-1.5,n.height/2-1.5,e.size/1.5+1,0,2*Math.PI),t.fill(),t.closePath(),t.beginPath(),t.fillStyle=e.color,t.arc(n.width/2,n.height/2,e.size/1.5,0,2*Math.PI),t.fill(),t.closePath(),e.dots.forEach((function(e){t.beginPath(),t.fillStyle=e.color,t.arc(e.randX.plusOrMinus%2==0?n.width/2+e.randX.x:n.width/2-e.randX.x,e.randY.plusOrMinus%2==0?n.height/2+e.randY.y:n.height/2-e.randY.y,e.size/1.5,0,2*Math.PI),t.fill(),t.closePath()}))}(n)):(t.innerHTML="<h1>Simulation is over</h1>\n             <h2>All blobs are <span>dead</span></h2>",document.body.appendChild(t))}function P(e){var n={size:30,speed:1,resistance:350,bornDelay:700,hunger:1500,sexDelay:500},t=Math.floor(Math.random()*Object.keys(n).length),i=Math.floor(10*Math.random())+1,r=u[e][Object.keys(n)[t]];u[e].dominant.feature=Object.keys(n)[t],u[e].dominant.value=i,r+=S(r,i)}function S(e,n){return e/100*n}function z(e,n,t){var i={x:Math.floor(13*Math.random()),plusOrMinus:n},r={y:Math.floor(13*Math.random()),plusOrMinus:n};e.dots.push({color:k(void 0===t?e.color:t),size:Math.floor(Math.random()*(e.size/5)),x:n%2==0?e.x+i.x:e.x-i.x,y:n%2==0?e.y+r.y:e.y-r.y,randX:i,randY:r})}function k(e){var n=Math.floor(5*Math.random())+5;return function(e,n,t,i){var o,a,s,l,h,c,u,d=parseInt,f=Math.round,p="string"==typeof t;return"number"!=typeof e||e<-1||e>1||"string"!=typeof n||"r"!=n[0]&&"#"!=n[0]||t&&!p?null:(u=n.length>9,u=p?t.length>9||"c"==t&&!u:u,h=b(n),l=e<0,c=t&&"c"!=t?b(t):l?{r:0,g:0,b:0,a:-1}:{r:255,g:255,b:255,a:-1},l=1-(e=l?-1*e:e),h&&c?(i?(o=f(l*h.r+e*c.r),a=f(l*h.g+e*c.g),s=f(l*h.b+e*c.b)):(o=f(Math.pow(l*Math.pow(h.r,2)+e*Math.pow(c.r,2),.5)),a=f(Math.pow(l*Math.pow(h.g,2)+e*Math.pow(c.g,2),.5)),s=f(Math.pow(l*Math.pow(h.b,2)+e*Math.pow(c.b,2),.5))),p=h.a,c=c.a,p=(h=p>=0||c>=0)?p<0?c:c<0?p:p*l+c*e:0,u?"rgb"+(h?"a(":"(")+o+","+a+","+s+(h?","+f(1e3*p)/1e3:"")+")":"#"+(4294967296+16777216*o+65536*a+256*s+(h?f(255*p):0)).toString(16).slice(1,h?void 0:-2)):null);function b(e){var n=e.length,t={};if(n>9){var i,l;if(i=e=e.split(","),l=r()(i,4),o=l[0],a=l[1],s=l[2],p=l[3],(n=e.length)<3||n>4)return null;t.r=d("a"==o[3]?o.slice(5):o.slice(4)),t.g=d(a),t.b=d(s),t.a=p?parseFloat(p):-1}else{if(8==n||6==n||n<4)return null;n<6&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+(n>4?e[4]+e[4]:"")),e=d(e.slice(1),16),9==n||5==n?(t.r=e>>24&255,t.g=e>>16&255,t.b=e>>8&255,t.a=f((255&e)/.255)/1e3):(t.r=e>>16,t.g=e>>8&255,t.b=255&e,t.a=-1)}return t}}(Number("-0.".concat(n)),e)}function D(e){for(var n=0;n<e;n++){var t=I();d.push({x:t.x,y:t.y,size:.5})}}function q(e,n,t,i){var r=document.querySelector("#characters").getContext("2d");r.beginPath(),r.fillStyle=e,r.arc(n,t,i,0,2*Math.PI),r.fill(),r.closePath()}function I(){return{x:Math.floor(Math.random()*window.innerWidth),y:Math.floor(Math.random()*window.innerHeight)}}function E(){for(var e="0123456789abcdef",n="#",t=0;t<=5;t++)n+=e[Math.floor(Math.random()*e.length)];return n}v(),function(){var e=document.querySelector("#characters");if(0===u.length){e.width=window.innerWidth,e.height=window.innerHeight;for(var n=0;n<10;n++)u.push(new g(30,1,E(),0,0,350,20,[],[],700,1500,500,[],null,!1,{width:100,height:10},500,{},1,{hunger:null})),P(n)}u.forEach((function(e){e.giveBlobID(),e.declareBlobHungerBar(),0===e.x&&0===e.y&&function(e){var n=I();e.x=n.x,e.y=n.y}(e);for(var n=0;n<=e.howManyDots;n++)z(e,n)}))}(),M(),D(100),document.addEventListener("click",m),document.addEventListener("mousemove",w)},function(e,n){e.exports=function(e){if(Array.isArray(e))return e}},function(e,n){e.exports=function(e,n){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var t=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(t.push(a.value),!n||t.length!==n);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return t}}},function(e,n){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}}]);